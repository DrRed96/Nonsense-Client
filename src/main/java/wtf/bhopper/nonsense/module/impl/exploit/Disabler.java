package wtf.bhopper.nonsense.module.impl.exploit;

import net.minecraft.network.play.client.C0BPacketEntityAction;
import wtf.bhopper.nonsense.event.bus.EventLink;
import wtf.bhopper.nonsense.event.bus.Listener;
import wtf.bhopper.nonsense.event.impl.EventPreMotion;
import wtf.bhopper.nonsense.module.Module;
import wtf.bhopper.nonsense.module.ModuleCategory;
import wtf.bhopper.nonsense.module.ModuleInfo;
import wtf.bhopper.nonsense.module.property.annotations.Description;
import wtf.bhopper.nonsense.module.property.impl.EnumProperty;
import wtf.bhopper.nonsense.util.minecraft.PacketUtil;

import java.util.function.Supplier;

@ModuleInfo(name = "Disabler",
        description = "Bye bye bad anticheat!",
        category = ModuleCategory.EXPLOIT)
public class Disabler extends Module {

    private final EnumProperty<Mode> mode = new EnumProperty<>("Mode", "Disabler method", Mode.PACKET_FUCK);

    public Disabler() {
        this.addProperties(this.mode);
        this.setSuffix(this.mode::getDisplayValue);
    }

    @EventLink
    public final Listener<EventPreMotion> onPre = _ -> {
        switch (this.mode.get()) {
            case MINIBLOX -> {
                if (mc.thePlayer.ticksExisted % 20 == 0) {
                    // This is retarded...
                    PacketUtil.send(new C0BPacketEntityAction(mc.thePlayer, C0BPacketEntityAction.Action.STOP_SLEEPING));
                }
            }
        }
    };

    public boolean packetFuck() {
        return this.isToggled() && this.mode.is(Mode.PACKET_FUCK);
    }

    private enum Mode {
        PACKET_FUCK,
        @Description("Credit to Outer & NoCheatPlus") MINIBLOX
    }

}
